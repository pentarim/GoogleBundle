<script type="text/javascript">
var _gaq = _gaq || [];
{% for tracker in _view.google_analytics.getTrackers(['shop']) %}

	_gaq.push(function() {
		var {{ tracker.name }} = _gaq._createAsyncTracker('{{ tracker.accountId }}','{{ tracker.name }}');
	});

	{% if tracker.domain %}
		_gaq.push(['{{ tracker.name }}._setDomainName', '{{ tracker.domain }}']);
	{% endif %}

	{% if _view.google_analytics.hasCustomVars() %}
		{% for customVar in _view.google_analytics.getCustomVars() %}
			_gaq.push(['{{ tracker.name }}._setCustomVar', {{ customVar.index }}, '{{ customVar.name }}', '{{ customVar.value }}', {{ customVar.optScope }}]);
		{% endfor %}
	{% endif %}

	{% if _view.google_analytics.hasPageViewQueue() %}
		{% for pageView in _view.google_analytics.getPageViewQueue() %}
			_gaq.push(['{{ tracker.name }}._trackPageview', '{{ pageView }}']);
		{% endfor %}
	{% endif %}

	{% if _view.google_analytics.hasCustomPageView() %}
		_gaq.push(['{{ tracker.name }}._trackPageview', '{{ _view.google_analytics.getCustomPageView() }}']);
	{% else %}
		_gaq.push(['{{ tracker.name }}._trackPageview', '{{ _view.google_analytics.getRequestUri() }}']);
	{% endif %}

{% endfor %}

(function() {
	var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>
